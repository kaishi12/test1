@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_LayoutUser.cshtml";
}
<div class="padding">
        <div class="m-b">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a>Home</a></li>
            </ol>
        </div>
        <div class="row no-gutter">
            <div class="col-sm-3 col-lg-2">
                <div class="p-y">
                    <div class="nav-active-border left b-{{app.setting.theme.primary}}">
                        <ul class="nav nav-sm flex-column">
                            <li class="nav-item">
                                <a class="nav-link block active" href data-toggle="tab" data-target="#tab-1">Thông tin cá nhân</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link block" href data-toggle="tab" data-target="#tab-2">Bảo mật</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="col-sm-9 col-lg-10 light lt">
                <div class="tab-content pos-rlt">

                    <div class="tab-pane active" id="tab-1">
                        @using (Ajax.BeginForm("ThongTinCaNhan", "User", new AjaxOptions { HttpMethod = "POST", UpdateTargetId = "tab-1" }, new { @enctype = "multipart/form-data", ui_jp = "parsley" }))
                        {
                            @Html.AntiForgeryToken()
                            <div class="m-b text-sm">
                                @Html.ValidationSummary(false, "", new { @class = "text-danger" })
                            </div>
                            <div class="p-a-md dker _600">Thông tin cá nhân</div>
                            @Html.Action("ThongTinCaNhan", new { id = ViewBag.TK })
                        }
                    </div>

                    <div class="tab-pane" id="tab-2">

                        @using (Ajax.BeginForm("BaoMat", "User", new AjaxOptions { HttpMethod = "POST", UpdateTargetId = "tab-5" }, new { @enctype = "multipart/form-data", ui_jp = "parsley" }))
                        {@Html.AntiForgeryToken()
                        <div class="m-b text-sm">
                            @Html.ValidationSummary(false, "", new { @class = "text-danger" })
                        </div>
                        <div class="p-a-md dker _600">Bảo Mật</div>
                        @Html.Action("BaoMat", new { id = ViewBag.TK })
                    }

                    </div>
                </div>
            </div>
        </div>
    </div>



<!-- .modal -->
@*<div id="modal" class="modal fade animate black-overlay" data-backdrop="false">
        <div class="row-col h-v">
            <div class="row-cell v-m">
                <div class="modal-dialog modal-sm">
                    <div class="modal-content flip-y">
                        <div class="modal-body text-center">
                            <p class="p-y m-t"><i class="fa fa-remove text-warning fa-3x"></i></p>
                            <p>Are you sure to delete your account?</p>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn white p-x-md" data-dismiss="modal">No</button>
                            <button type="button" class="btn btn-danger p-x-md" data-dismiss="modal">Yes</button>
                        </div>
                    </div> /.modal-content
                </div>
            </div>
        </div>
    </div>*@
<!-- / .modal -->
@*<style>
    canvas {
        cursor: crosshair;
        border: 1px solid #000000;
    }
</style>
<canvas id="canvas" width="800" height="500"></canvas>
<img id="abca" hidden src="~/Truyen/01.jpg" />
<div id="output"></div>
<button onclick="reload()">Reload Ảnh</button>
@section scripts
    {
    <script>


        //Canvas
        var canvas = document.getElementById('canvas');
        var ctx = canvas.getContext('2d');

        //Variables
        var canvasx = $(canvas).offset().left;
        var canvasy = $(canvas).offset().top;
        canvas.height = canvas.scrollHeight;
        canvas.width = canvas.scrollWidth;
        function reload() {
            ctx.drawImage(document.getElementById("abca"), 0, 0, canvas.width, canvas.height);
        }
        
        var last_mousex = last_mousey = 0;
        var mousex = mousey = 0;
        var mousedown = false;

        //Mousedown
        $(canvas).on('mousedown', function (e) {
            last_mousex = parseInt(e.clientX - canvasx);
            last_mousey = parseInt(e.clientY - canvasy);
            mousedown = true;
        });

        //Mouseup
        $(canvas).on('mouseup', function (e) {
            mousedown = false;
        });

        //Mousemove
        $(canvas).on('mousemove', function (e) {
            mousex = parseInt(e.clientX - canvasx);
            mousey = parseInt(e.clientY - canvasy);
            if (mousedown) {
                /*ctx.clearRect(0, 0, canvas.width, canvas.height);*/ //clear canvas
                ctx.beginPath();
                var width = mousex - last_mousex;
                var height = mousey - last_mousey;
                ctx.rect(last_mousex, last_mousey, width, height);
                ctx.strokeStyle = 'black';
                ctx.lineWidth = 1;
                ctx.stroke();
            }
            //Output
            $('#output').html('current: ' + mousex + ', ' + mousey + '<br/>last: ' + last_mousex + ', ' + last_mousey + '<br/>mousedown: ' + mousedown);
        });
    </script>
}*@

